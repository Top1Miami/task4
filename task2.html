<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Title</title>
</head>
<body>
<script>
    var listOfLetters = [];

    function deleteSelectedChecks() {
        let checks = document.querySelectorAll(".checkbox");
        if(checks[0].checked) {
            deleteAll(checks);
            checks[0].checked = false;
        } else {
            let counter = 0;
            for(let i = 1; i < checks.length; i++) {
                if(checks[i].checked) {
                    let checkParent = checks[i];
                    while(!checkParent.classList.contains("message-box__list")) {
                        checkParent = checkParent.parentElement;
                    }
                    deleteSingleLetter(checkParent);
                    counter++;
                }
            }
            setTimeout(function() {
                console.log(counter);
                console.log(listOfLetters.length);
                console.log(listOfLetters);
                while(listOfLetters.length > 0 || counter !== 0) {
                    let letterToGetBack = listOfLetters.pop();
                    console.log(letterToGetBack);
                    let list = document.querySelector(".message-box__ul");
                    letterToGetBack.classList.add("message-box__list-add");
                    letterToGetBack.classList.remove("message-box__list-delete");
                    list.insertBefore(letterToGetBack, list.lastElementChild.nextSibling);
                    letterToGetBack.addEventListener("animationend", () => {
                        letterToGetBack.classList.remove("message-box__list-add");
                    });
                    console.log(letterToGetBack);
                    counter--;
                }
            }, 3000);

        }
    }

    function deleteSingleLetter(toDelete) {
        toDelete.classList.add("message-box__list-delete");
        toDelete.addEventListener("animationend", () => {
            toDelete.remove();
        });
    }

    function deleteAll(checks) {
        for(let i = 1; i < checks.length; i++) {
            let checkParent = checks[i];
            while(!checkParent.classList.contains("message-box__list")) {
                checkParent = checkParent.parentNode;
            }
            deleteSingleLetter(checkParent);
            listOfLetters = [];
        }
    }

    function addNewMessage() {
        let list = document.querySelector(".message-box__ul");
        let node = document.createElement('li');
        node.className = "message-box__list";
        node.innerHTML = templateLetter;
        node.classList.add("message-box__list-add");
        list.insertBefore(node, list.firstElementChild);
        node.addEventListener("animationend", () => {
            node.classList.remove("message-box__list-add");
        });
    }

    let templateLetter = '<a href="#">\n' +
        '                    <input type="checkbox" class="checkbox " id="useless2">\n' +
        '                    <img class="img2" src="yaimg.png" alt="yacircle">\n' +
        '                    <div class="unread-name">Команда Яндекс.Почты</div>\n' +
        '                    <div class="unread-marker"></div>\n' +
        '                    <div class="unread">Как читать почту с мобильного</div>\n' +
        '                    <div class="date">14 июл</div>\n' +
        '                </a>';

    window.onload = function() {
        start();
    };

    function start() {
        setInterval(newMail, 5000);
    }

    function newMail() {
        let letter = generateLetter();
        listOfLetters.push(letter);
        let viewedLetters = document.querySelectorAll(".message-box__list");
        if(viewedLetters.length >= 10) {
            let movedLetter = viewedLetters[9];
            listOfLetters.push(movedLetter);
            deleteSingleLetter(movedLetter);
        }
        let ul = document.querySelector(".message-box__ul");
        letter.classList.add("message-box__list-add");
        ul.insertBefore(letter, ul.firstElementChild);
        letter.addEventListener("animationend", () => {
            letter.classList.remove("message-box__list-add");
        });
    }

    function generateLetter() {
        let node = document.createElement('li');
        node.className = "message-box__list";
        node.innerHTML = templateLetter;
        return node;
        //some generation code
    }


</script>

<div>
    <div class="three-stripes">
        <div class="three-stripes__stripe">
        </div>
        <div class="three-stripes__stripe">
        </div>
        <div class="three-stripes__stripe">
        </div>
    </div>
    <div class="yandex">
        <svg class="logo" viewBox="0 0 77 31"><title xmlns="http://www.w3.org/2000/svg">Artboard 3</title>
            <g xmlns="http://www.w3.org/2000/svg" fill-rule="nonzero" fill="currentColor">
                <path class="first-letter"
                      d="M9.35 4.394h-1.3c-1.965 0-3.866 1.3-3.866 5.071 0 3.645 1.743 4.818 3.866 4.818h1.3V4.394zM7.322 16.311l-3.867 8.684H.634l4.247-9.287c-1.997-1.013-3.328-2.852-3.328-6.243 0-4.754 3.011-7.13 6.593-7.13h3.644v22.66H9.35v-8.684H7.322z"></path>
                <path d="M59.059 17.009c0-5.008 1.934-8.21 5.674-8.21 1.426 0 2.25.382 2.947.825l-.349 2.346c-.666-.57-1.616-1.11-2.63-1.11-1.775 0-3.042 1.997-3.042 6.022 0 3.993.95 6.275 2.947 6.275 1.204 0 2.123-.475 2.693-.982l.571 1.838c-.856.728-1.87 1.204-3.328 1.204-3.422 0-5.483-2.757-5.483-8.208zm-7.226.03v7.956h-2.471V9.023h2.471v7.383l3.835-7.383h2.504l-3.962 7.51 4.533 8.462h-2.695l-4.215-7.955zm-11.63-1.488h4.087c0-2.726-.443-4.723-1.869-4.723-1.521 0-2.06 1.87-2.218 4.723zm2.725 9.666c-3.296 0-5.324-2.63-5.324-7.543 0-5.134 1.426-8.874 4.817-8.874 2.662 0 4.406 1.997 4.406 7.416v1.363H40.17c0 3.614 1.015 5.515 2.98 5.515 1.394 0 2.504-.634 3.138-1.078l.57 1.902c-1.014.792-2.346 1.299-3.93 1.299zM32.406 11.019h-2.757v.285c0 3.359-.158 8.272-1.489 11.663h4.246V11.019zm3.708 17.114h-2.218v-3.138H27.05v3.138h-2.219v-5.166h.983c1.458-3.391 1.616-8.335 1.616-12.582V9.023h7.416v13.944h1.268v5.166zM23.406 9.023v15.972h-2.441v-7.162h-3.677v7.162h-2.471V9.023h2.471v6.782h3.677V9.023h2.441z"></path>
            </g>
        </svg>
        <svg class="logo" viewBox="0 0 54 31"><title>Artboard</title>
            <path d="M32.68 24.98V9H31v6.861s-1.157 1.237-2.9 1.237c-1.49 0-2.41-.92-2.41-3.202V9H24.2v4.864c0 3.012 1.427 4.502 3.646 4.502 1.902 0 3.154-1.015 3.154-1.015v7.629h1.68zM43.656 10.4V9H34.68v1.4h3.71v14.58h1.69V10.4h3.576zM8.337 24.666h1.585V2H0v22.666h1.585V3.3h6.752v21.366zm43.466.293h1.363c-.19-.602-.349-1.838-.349-2.948v-8.717c0-3.17-1.49-4.628-4.12-4.628-1.808 0-3.139.792-3.773 1.616l.412 1.427c.76-1.11 1.997-1.744 3.36-1.744 1.744 0 2.663 1.046 2.663 3.487v1.997h-1.743c-3.456 0-5.326 1.776-5.326 5.2 0 2.916 1.49 4.627 3.646 4.627 1.585 0 2.726-.95 3.487-2.472.095 1.14.253 1.743.38 2.155zm-34.241.024c2.758 0 4.882-3.107 4.882-8.401 0-5.484-2.124-8.21-4.882-8.21-2.758 0-4.882 3.075-4.882 8.4 0 5.453 2.124 8.21 4.882 8.21zm0-1.205c-1.87 0-3.392-2.124-3.392-7.1 0-4.851 1.522-7.07 3.392-7.07 1.87 0 3.392 2.06 3.392 7.07 0 4.818-1.522 7.1-3.392 7.1zm30.692.294c-1.521 0-2.504-1.3-2.504-3.55 0-2.79 1.268-3.995 3.9-3.995h1.71v4.406c-.57 1.712-1.616 3.139-3.106 3.139z"
                  fill-rule="nonzero" fill="currentColor"></path>
        </svg>
    </div>
    <div class="search">
        <input class="search__input" placeholder="Поиск">
    </div>
</div>
<main class="main-window">
    <div class="left-buttons">
        <button class="left-buttons__write" onclick="addNewMessage()">
            Написать
        </button>
        <div class="categories">
            <ul class="categories__ul">
                <li class="left-list"><a href="#" class="left-links">Входящие</a></li>
                <li class="left-list"><a href="#" class="left-links">Отправленные</a></li>
                <li class="left-list"><a href="#" class="left-links">Удаленные</a></li>
                <li class="left-list"><a href="#" class="left-links">Спам</a></li>
                <li class="left-list"><a href="#" class="left-links">Черновики</a></li>
                <li class="left-list"><a href="#" class="left-links">Создать папку</a></li>
            </ul>
        </div>
    </div>
    <div class="message-box">
        <div class="message-box__list">
            <input type="checkbox" class="checkbox" id="useless0">
            <button class="message-buttons">Переслать</button>
            <button class="message-buttons" onclick = deleteSelectedChecks()>Удалить</button>
            <button class="message-buttons">Это спам!</button>
            <button class="message-buttons">Прочитано</button>
        </div>
        <div class = "message-box__ul-wrap">
            <ul class="message-box__ul">
                <li class="message-box__list">
                    <label for="hideMailPage">
                        <div class="other-rows">
                            <input type="checkbox" class="checkbox" id="useless1">
                            <img class="img2" src="yaimg.png" alt="yacircle">
                            <div class="unread-name">Яндекс.Паспорт</div>
                            <div class="unread-marker"></div>
                            <div class="unread">Доступ к аккаунта восстановлен</div>
                            <div class="date">6 авг</div>
                        </div>
                    </label>

                    <input type="checkbox" id="hideMailPage">
                    <div class="kitten-page">
                        <label for="hideMailPage">
                            <div class="close-page">X</div>
                        </label>
                        <div class="manul-text">
                            <p>Манул — хищное млекопитающее семейства кошачьих. Своё второе название — па́лласов кот (англ.
                                Pallas's
                                cat) —
                                он получил в честь немецкого натуралиста П. С. Палласа. Синонимичное латинское название
                                Otocolobus
                                происходит от греческого us, otos —
                                ухо, kolobos — уродливый, то есть «уродливое ухо».
                                <!--<img class = "manulImg" src = "manul.png" alt = "Manul">-->
                                Манул — животное размером с домашнюю кошку: длина его тела 52—65 см, хвоста 23—31 см; весит он
                                2—5 кг.</p>
                            <p>От обычной кошки он отличается более плотным,
                                <img class="manul-img-circ" src="manulCirc.png" alt="ManulCircle">
                                массивным телом на коротких толстых лапах и очень густой шерстью (на один квадратный сантиметр
                                приходится 9000 волосков, которые могут достигать длины 7 см).
                                Голова у манула небольшая, широкая и уплощённая, с маленькими округлыми ушками, которые широко
                                расставлены. Глаза жёлтые,
                                зрачки которых при ярком свете в отличие от зрачков глаз домашней кошки не приобретают
                                щелевидную форму,
                                а остаются круглыми.</p>
                            <p>На щеках — пучки удлинённых волос (баки). Хвост длинный и толстый, с закруглённым кончиком.
                                Мех у манула самый пушистый и густой среди кошачьих. Окрас меха представляет собой комбинацию
                                светло-серого и палево-охристого цветов;
                                волоски имеют белые кончики, в результате чего создаётся впечатление, что мех манула припорошен
                                снегом.
                                На задней части туловища и на хвосте имеются узкие тёмные поперечные полосы, по бокам морды от
                                углов
                                глаз идут вертикальные чёрные полосы.
                                Кончик хвоста чёрный. Низ тела бурый с белым налётом.
                                массивным телом на коротких толстых лапах и очень густой шерстью (на один квадратный сантиметр
                                приходится 9000 волосков, которые могут достигать длины 7 см).</p>
                        </div>
                    </div>
                </li>
                <li class="message-box__list">
                    <a href="#">
                        <input type="checkbox" class="checkbox " id="useless2">
                        <img class="img2" src="yaimg.png" alt="yacircle">
                        <div class="unread-name">Команда Яндекс.Почты</div>
                        <div class="unread-marker"></div>
                        <div class="unread">Как читать почту с мобильного</div>
                        <div class="date">6 июл</div>
                    </a>
                </li>
                <li class="message-box__list">
                    <a href="#">
                        <input type="checkbox" class="checkbox" id="useless3">
                        <img class="img2" src="yaimg.png" alt="yacircle">
                        <div class="read-name">Команда Яндекс.Почты</div>
                        <div class="read">Как читать почту с мобильного</div>
                        <div class="date">6 июл</div>
                    </a>
                </li>
                <li class="message-box__list">
                    <a href="#">
                        <input type="checkbox" class="checkbox" id="useless4">
                        <img class="img2" src="yaimg.png" alt="yacircle">
                        <div class="read-name">Яндекс</div>
                        <div class="read">Соберите всю почту в этот ящик asddddddddasdasdasdasdasdasasdasdsadddddddddddddddddddddd</div>
                        <div class="date">6 июл</div>
                    </a>
                </li>
            </ul>
        </div>
        <div class="separator"></div>
        <footer class = "refs">
            <a class="link-bot" href="#">Помощь и обратная связь</a>
            <a class="link-bot" href="#">Реклама</a>
            <div class="certificate">© 2001-2018, Яндекс</div>
        </footer>
    </div>
</main>
</body>
</html>